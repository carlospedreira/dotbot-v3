name: task_mark_analysed
description: Mark a task as analysed and ready for implementation, storing pre-flight analysis data
inputSchema:
  type: object
  properties:
    task_id:
      type: string
      description: "The unique identifier of the task to mark as analysed"
    analysis:
      type: object
      description: "Pre-flight analysis data including entities, files, dependencies, standards, and implementation approach"
      properties:
        entities:
          type: object
          description: "Detected domain entities"
          properties:
            primary:
              type: array
              items:
                type: string
              description: "Primary entities involved in this task"
            related:
              type: array
              items:
                type: string
              description: "Related entities that may be affected"
            context_summary:
              type: string
              description: "Brief summary of entity context"
        files:
          type: object
          description: "Identified files for implementation"
          properties:
            to_modify:
              type: array
              items:
                type: string
              description: "Files that need to be modified"
            patterns_from:
              type: array
              items:
                type: string
              description: "Files containing patterns to follow"
            tests_to_update:
              type: array
              items:
                type: string
              description: "Test files that need updating"
        dependencies:
          type: object
          description: "Dependency analysis"
          properties:
            task_dependencies:
              type: array
              items:
                type: string
              description: "Task dependencies (should all be met)"
            implicit_dependencies:
              type: array
              items:
                type: string
              description: "Implicit dependencies discovered during analysis"
            blocking_issues:
              type: array
              items:
                type: string
              description: "Issues that might block implementation"
        standards:
          type: object
          description: "Applicable coding standards"
          properties:
            applicable:
              type: array
              items:
                type: string
              description: "List of applicable standard files"
            relevant_sections:
              type: object
              description: "Map of standard file to relevant sections"
        product_context:
          type: object
          description: "Extracted product context"
          properties:
            mission_summary:
              type: string
              description: "Brief mission statement"
            entity_definitions:
              type: string
              description: "Extracted relevant entity definitions"
            tech_stack_relevant:
              type: string
              description: "Relevant tech stack info"
        implementation:
          type: object
          description: "Implementation guidance"
          properties:
            approach:
              type: string
              description: "High-level implementation approach"
            key_patterns:
              type: string
              description: "Key patterns to follow"
            risks:
              type: array
              items:
                type: string
              description: "Identified risks"
            estimated_tokens:
              type: integer
              description: "Estimated tokens needed for implementation"
        questions_resolved:
          type: array
          description: "Questions that were resolved during analysis"
          items:
            type: object
            properties:
              question:
                type: string
              answer:
                type: string
              answered_at:
                type: string
  required:
    - task_id
    - analysis
